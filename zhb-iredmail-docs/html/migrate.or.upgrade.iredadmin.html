<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Migrate or upgrade iRedAdmin</title>
        <link rel="stylesheet" type="text/css" href="./css/markdown.css" />
    </head>
    <body>
    
    <div id="navigation">
        <a href="http://www.iredmail.org" target="_blank">iRedMail web site</a>
    
        // <a href="./index.html">Document Index</a>
    </div><h1 id="migrate-or-upgrade-iredadmin">Migrate or upgrade iRedAdmin</h1>
<div class="toc">
<ul>
<li><a href="#migrate-or-upgrade-iredadmin">Migrate or upgrade iRedAdmin</a><ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#download-the-latest-iredadmin">Download the latest iRedAdmin</a></li>
<li><a href="#upgrade-steps">Upgrade Steps</a></li>
<li><a href="#additional-steps">Additional steps</a></li>
</ul>
</li>
</ul>
</div>
<blockquote>
<p>We provide remote upgrade service, check <a href="../support.html">the price</a> and <a href="../contact.html">contact us</a>.</p>
</blockquote>
<p>This tutorial describes how to update or migrate iRedAdmin (either open source
edition or old iRedAdmin-Pro release) to the latest iRedAdmin release (again,
either open source edition or iRedAdmin-Pro).</p>
<h2 id="requirements">Requirements</h2>
<p>You <strong>MUST</strong> have iRedAdmin open source edition or old iRedAdmin-Pro release
installed and running on your server before upgrading.</p>
<h2 id="download-the-latest-iredadmin">Download the latest iRedAdmin</h2>
<ul>
<li>iRedAdmin (open source edition) is available for download <a href="http://www.iredmail.org/yum/misc/">here</a>.</li>
<li>
<p>How to download the latest iRedAdmin-Pro</p>
<p>All customers can get download link of new release by following below steps:</p>
<ul>
<li>Login to iRedAdmin-Pro as global admin.</li>
<li>Click <code>License</code> button on the top-right corner. it will show you basic
  license info and a <code>Download</code> button if new version is available.</li>
<li>Click <code>Download</code> button, your mailbox (license owner) will receive an email
  with download link in a short time. Note: if your mail server has greylisting
  enabled, it may take longer, please be patient and don't request download
  link again and again.</li>
</ul>
<p>if you cannot download iRedAdmin-Pro for some reason, <a href="../contact.html">contact us</a> directly.</p>
</li>
</ul>
<h2 id="upgrade-steps">Upgrade Steps</h2>
<ul>
<li>
<p>Upload or copy the latest iRedAdmin to your server which has iRedAdmin
open source edition or old iRedAdmin-Pro release running. We assume you
uploaded it to <code>/root/iRedAdmin-{BACKEND}-x.y.z.tar.bz2</code> ({BACKEND} is one
of <code>LDAP</code>, <code>MySQL</code>, <code>PGSQL</code>). We will use iRedAdmin-x.y.z below for
example, please replace x.y.z by the real file name. For example,
<code>iRedAdmin-Pro-LDAP-2.1.2.tar.bz2</code>.</p>
</li>
<li>
<p>Uncompress and upgrade iRedAdmin:</p>
</li>
</ul>
<pre><code># cd /root/
# tar xjf iRedAdmin-x.y.z.tar.bz2
# cd iRedAdmin-x.y.z/tools/
# bash upgrade_iredadmin.sh
</code></pre>

<ul>
<li>
<p>If you're running iRedMail-<code>0.8.7</code> or earlier version, please login to SQL
  server as root user (for MySQL/MariaDB, it's <code>root</code> user, for PostgreSQL,
  it's <code>postgres</code> user) to alter SQL table <code>iredadmin.log</code> with below SQL command:</p>
<ul>
<li>For OpenLDAP/MySQL/MariaDB backends: <pre>sql&gt; USE iredadmin;
sql&gt; ALTER TABLE log MODIFY COLUMN ip VARCHAR(40) NOT NULL DEFAULT '';
sql&gt; ALTER TABLE log MODIFY COLUMN event VARCHAR(20) NOT NULL DEFAULT '';</pre></li>
<li>For PostgreSQL: <pre>sql&gt; \c iredadmin;
sql&gt; ALTER TABLE log ALTER COLUMN ip TYPE VARCHAR(40);
sql&gt; ALTER TABLE log ALTER COLUMN event TYPE VARCHAR(20);</pre></li>
</ul>
</li>
</ul>
<p>That's all. If it doesn't work for you, please post a new topic in our
<a href="http://www.iredmail.org/forum/">online support forum</a>.</p>
<h2 id="additional-steps">Additional steps</h2>
<ul>
<li>
<p>To quarantine SPAM/Virus into SQL database and manage them with
  iRedAdmin-Pro, please follow this tutorial to update Amavisd settings:
  <a href="./quarantining.html">Quarantining SPAM and Virus emails into SQL database</a></p>
</li>
<li>
<p>To manage white/blacklist with iRedAdmin-Pro, please enable
  per-recipient policy lookup in Amavisd, and enable plugin <code>amavisd_wblist</code>
  in iRedAPD config file (<code>/opt/iredapd/settings.py</code>, parameter <code>plugins =</code>):
  <a href="./amavisd.per-recipient.policy.lookup.html">Amavisd: Enable per-recipient policy lookup</a></p>
<p>Note: Cluebringer still provides white/blacklists, but iRedAdmin-Pro
doesn't manage them anymore after iRedMail-0.9.0 release. So please
migreate Cluebringer white/blacklists to Amavisd database by following
this <a href="http://www.iredmail.org/forum/post35480.html#p35480">forum post</a>.</p>
</li>
</ul><p style="text-align: center; color: grey;">Document published under a <a href="http://creativecommons.org/licenses/by-nd/3.0/us/" target="_blank">CC BY-ND 3.0</a> license. If you found something wrong, please do <a href="http://www.iredmail.org/contact.html">contact us</a> to fix it.<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3293801-21', 'auto');
  ga('send', 'pageview');
</script>
</body></html>